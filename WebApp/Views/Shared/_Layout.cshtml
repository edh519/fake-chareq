@using WebApp.Controllers
@using BusinessLayer.Helpers
@using Microsoft.AspNetCore.Identity

@{
    string mainClass = string.Equals(ViewData["Title"].ToString(), "Error", StringComparison.OrdinalIgnoreCase) ||
                       string.Equals(ViewData["Title"].ToString(), "Log in", StringComparison.OrdinalIgnoreCase) ?
                       "mt-3 mb-5 pb-5 padding-x-2-5vw col-xl-12" : "mt-3 mb-5 pb-5 ytupattern padding-x-2-5vw col-xl-12";
}


<!DOCTYPE html>

<html lang="en">
<head>
    <meta name="viewport" content="width=device-width" charset="UTF-8" />
    <title>ChaReq | @ViewBag.Title</title>

    @* IMPORTANT: This script needs to be the first thing to run on the page to prevent flickering light mode *@
    <script src="~/js/themeToggleLogic.js" asp-append-version="true"></script>
    <script src="~/lib/jquery/dist/jquery.min.js" asp-append-version="true"></script>


    <link href="~/lib/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" asp-append-version="true" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Sen&display=swap" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="~/font-awesome/css/all.min.css" asp-append-version="true" />
    <link href="https://cdn.datatables.net/v/bs4/dt-2.1.2/datatables.min.css" rel="stylesheet" asp-append-version="true">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" asp-append-version="true">

    <link rel="stylesheet" href="~/lib/select2/css/select2.min.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/lib/select2-bs5-theme/select2-bootstrap-5-theme.min.css" asp-append-version="true" />

    <link href="~/css/site.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/TinyMCE.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="~/lib/sweetalert2/sweetalert2.min.css" asp-append-version="true" />
    <style>
        @@media print {
            #hideForPrint {
                display: none;
            }
        }
    </style>
    @RenderSection("Styles", required: false)

</head>
<body onload="runPopupMessages()" class="ma">
    <partial name="_LoginPartial" />
    <main role="main" class="@mainClass">
        <partial name="_PopupMessagePartial" />

        @RenderBody()
    </main>

    <environment include="Staging, Development, Training">
        <div class="fixed-bottom text-center bg-danger p-1" style="z-index: 1050;">
            <h1 class="text-center text-white mx-5 d-inline-block fs-5">
                This website is a @Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") version. Do not enter real data.
            </h1>
            <small class="text-white">
                @DateTime.Now.Year &copy; York Trials Unit<span class="d-none d-sm-inline">, University of York.</span>
                <a class="text-white ms-2 d-inline-block" href="https://uoy.atlassian.net/wiki/spaces/YTUGuides/pages/24773343/ChaReq+-+Change+Request+Manager" rel="noopener" target="_blank"> Wiki </a>
                <a class="text-white ms-2 d-inline-block" asp-controller=@(ControllerHelpers.GetControllerName<HomeController>())
                   asp-action=@nameof(HomeController.Support) target="_blank"> Support</a>
                <a class="text-white ms-2 d-inline-block" asp-controller="Home" asp-action="Privacy" target="_blank">
                    Legal<span class="d-none d-sm-inline"> Statements.</span>
                </a>
                <a class="text-white ms-2 d-inline-block" asp-controller=@(ControllerHelpers.GetControllerName<HomeController>())
                   asp-action=@nameof(HomeController.Accessibility) target="_blank"> Accessibility Statement</a>
            </small>

        </div>
    </environment>

    <environment exclude="Staging, Development, Training">
        <footer class="text-center bg-theme fixed-bottom text-muted-theme-toggle pb-2 pb-md-0" style="z-index: 1050;">
            <div class="d-flex justify-content-center small">
                <div class="mx-2">
                    @DateTime.Now.Year &copy; York Trials Unit<span class="d-none d-sm-inline">, University of York.</span>
                </div>
                <div class="mx-2">
                    <a href="https://uoy.atlassian.net/wiki/spaces/YTUGuides/pages/24773343/ChaReq+-+Change+Request+Manager" rel="noopener" target="_blank"> Wiki </a>
                </div>
                <div class="mx-2">
                    <a asp-controller=@(ControllerHelpers.GetControllerName<HomeController>())
                       asp-action=@nameof(HomeController.Support) target="_blank"> Support</a>
                </div>
                <div class="mx-2">
                    <a asp-controller="Home" asp-action="Privacy" target="_blank">
                        Legal<span class="d-none d-sm-inline"> Statements.</span>
                    </a>
                </div>
                <div class="mx-2">
                    <a asp-controller=@(ControllerHelpers.GetControllerName<HomeController>())
                       asp-action=@nameof(HomeController.Accessibility) target="_blank"> Accessibility Statement</a>
                </div>

            </div>
        </footer>
    </environment>
    <script asp-src-include="~/lib/tinymce/tinymce.min.js" asp-append-version="true"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js" asp-append-version="true"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js" asp-append-version="true"></script>
    <script src="~/js/expressive.annotations.validate.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/popper.js" asp-append-version="true"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js" asp-append-version="true"></script>
    <script src="https://cdn.datatables.net/v/bs4/dt-2.1.2/datatables.min.js" asp-append-version="true"></script>
    <script src="~/lib/sweetalert2/sweetalert2.min.js" asp-append-version="true"></script>
    <script asp-src-include="~/js/TinyMCE.js" asp-append-version="true"></script>
    <script src="~/js/moment.js" asp-append-version="true"></script>
    <script src="~/js/apiCalls.js" asp-append-version="true"></script>
    <script src="~/js/Helpers.js" asp-append-version="true"></script>
    <script src="~/lib/select2/js/select2.min.js" asp-append-version="true"></script>

    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/popupMessage.js" asp-append-version="true"></script>
    
    @if (User.Identity is not null && User.Identity.IsAuthenticated)
    {
        <script src="~/js/sessionAlert.js" asp-append-version="true"></script>
    }
    @if (TempData["FirstLogin"] != null)
    {
        <script src="~/js/firstLoginAlert.js" asp-append-version="true"></script>
    }
    @RenderSection("Scripts", required: false)
</body>
</html>